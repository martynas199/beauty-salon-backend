import { Router } from "express"; import Beautician from "../models/Beautician.js"; import Service from "../models/Service.js"; const r=Router(); r.get("/",async(req,res)=>{const {serviceId}=req.query; if(serviceId){const svc=await Service.findById(serviceId).lean(); const ids=svc?.beauticianIds||[]; return res.json(await Beautician.find({_id:{$in:ids},active:true}).lean());} res.json(await Beautician.find({active:true}).lean());}); r.post("/",async(req,res)=>res.json(await Beautician.create(req.body))); r.patch("/:id",async(req,res)=>res.json(await Beautician.findByIdAndUpdate(req.params.id, req.body, {new:true}))); export default r;
